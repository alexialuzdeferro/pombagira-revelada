<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Or√°culo Sagrado das Pombagiras üîÆ</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    :root {
      --primary-glow: #ff1744;
      --secondary-glow: #ff6b35;
      --gold: #ffd700;
      --correct-color: #00ff88;
      --wrong-color: #ff0044;
    }
    
    body {
      font-family: 'Cinzel', serif;
      background: radial-gradient(ellipse at center, #2d0000 0%, #1a0000 50%, #000000 100%);
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      transition: background 1s ease;
    }

    body.correct-answer {
      background: radial-gradient(ellipse at center, #0d2d1a 0%, #061a0d 50%, #000000 100%);
    }

    body.wrong-answer {
      background: radial-gradient(ellipse at center, #3d0000 0%, #2a0000 50%, #000000 100%);
    }

    /* Canvas de part√≠culas */
    #particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    /* Borda luminosa da tela */
    .screen-glow {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 5;
      box-shadow: inset 0 0 100px rgba(255, 23, 68, 0.3);
      transition: box-shadow 0.5s ease;
    }

    .screen-glow.correct {
      box-shadow: inset 0 0 150px rgba(0, 255, 136, 0.5);
      animation: correctPulse 0.5s ease;
    }

    .screen-glow.wrong {
      box-shadow: inset 0 0 150px rgba(255, 0, 68, 0.6);
      animation: wrongShake 0.5s ease;
    }

    @keyframes correctPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    @keyframes wrongShake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-10px); }
      40%, 80% { transform: translateX(10px); }
    }

    /* Container principal */
    .container {
      position: relative;
      z-index: 10;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
    }

    /* CONTADOR SUPABASE - Canto inferior direito flutuante e transparente */
    #global-counter {
      position: fixed;
      bottom: 15px;
      right: 15px;
      background: rgba(20, 0, 0, 0.4);
      color: rgba(255, 255, 255, 0.7);
      font-size: 11px;
      padding: 6px 12px;
      border-radius: 15px;
      z-index: 10000;
      opacity: 0.7;
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 107, 53, 0.2);
      backdrop-filter: blur(8px);
      user-select: none;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      font-family: 'Cinzel', serif;
    }
    
    #global-counter:hover {
      opacity: 0.9;
      background: rgba(40, 0, 10, 0.6);
      border-color: rgba(255, 107, 53, 0.4);
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    }
    
    #global-count {
      color: #ffd700;
      font-weight: 600;
      font-size: 12px;
      margin-left: 4px;
      text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);
      transition: all 0.3s ease;
    }
    
    .counter-dot {
      display: inline-block;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: rgba(0, 255, 136, 0.5);
      margin-left: 8px;
      vertical-align: middle;
      box-shadow: 0 0 5px rgba(0, 255, 136, 0.3);
    }
    
    .counter-dot.online {
      animation: counterPulse 2s infinite;
    }
    
    @keyframes counterPulse {
      0%, 100% { opacity: 0.5; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    /* Mensagem de devo√ß√£o */
    .devotion-message {
      font-size: 0.9rem;
      color: var(--gold);
      opacity: 0.8;
      margin-bottom: 10px;
      font-style: italic;
      animation: devotionFloat 4s ease-in-out infinite;
    }

    @keyframes devotionFloat {
      0%, 100% { transform: translateY(0); opacity: 0.8; }
      50% { transform: translateY(-5px); opacity: 1; }
    }

    /* T√≠tulo principal */
    h1 {
      font-family: 'Dancing Script', cursive;
      color: #ff6b35;
      font-size: clamp(2rem, 5vw, 3.5rem);
      text-shadow: 0 0 20px #ff6b35, 0 0 40px #ff1744, 0 0 60px #ff6b35;
      margin: 20px 0;
      animation: titleGlow 2s ease-in-out infinite alternate;
    }

    @keyframes titleGlow {
      0% { 
        text-shadow: 0 0 20px #ff6b35, 0 0 40px #ff1744, 0 0 60px #ff6b35;
        transform: scale(1);
      }
      100% { 
        text-shadow: 0 0 30px #ff6b35, 0 0 60px #ff1744, 0 0 90px #ff6b35, 0 0 120px #ffd700;
        transform: scale(1.02);
      }
    }

    /* Altar com velas melhorado */
    .altar {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      margin: 20px 0 30px;
      position: relative;
      padding: 20px;
    }

    .altar::before {
      content: 'üåπ';
      position: absolute;
      left: 10%;
      bottom: 0;
      font-size: 2rem;
      animation: roseFloat 3s ease-in-out infinite;
    }

    .altar::after {
      content: 'üåπ';
      position: absolute;
      right: 10%;
      bottom: 0;
      font-size: 2rem;
      animation: roseFloat 3s ease-in-out infinite 0.5s;
    }

    @keyframes roseFloat {
      0%, 100% { transform: translateY(0) rotate(-5deg); }
      50% { transform: translateY(-10px) rotate(5deg); }
    }

    .vela {
      width: 22px;
      height: 70px;
      margin: 0 12px;
      background: linear-gradient(to bottom, #8b0000 0%, #ff2222 30%, #ff4444 50%, #ff2222 70%, #8b0000 100%);
      border-radius: 12px 12px 4px 4px;
      position: relative;
      animation: candlePulse 1.5s infinite ease-in-out;
      box-shadow: 0 0 20px rgba(255, 68, 68, 0.8), 0 0 40px rgba(255, 68, 68, 0.4);
    }

    .vela:nth-child(1) { animation-delay: 0s; }
    .vela:nth-child(2) { animation-delay: 0.2s; }
    .vela:nth-child(3) { animation-delay: 0.4s; height: 80px; }
    .vela:nth-child(4) { animation-delay: 0.6s; }
    .vela:nth-child(5) { animation-delay: 0.8s; }
    .vela:nth-child(6) { animation-delay: 1s; }
    .vela:nth-child(7) { animation-delay: 1.2s; }

    .vela::before {
      content: '';
      position: absolute;
      top: -3px;
      left: 50%;
      transform: translateX(-50%);
      width: 4px;
      height: 10px;
      background: linear-gradient(to bottom, #1a1a1a, #3a3a3a);
      border-radius: 2px;
    }

    .vela::after {
      content: '';
      position: absolute;
      top: -25px;
      left: 50%;
      transform: translateX(-50%);
      width: 14px;
      height: 25px;
      background: radial-gradient(ellipse at bottom, #fff 0%, #ffeb3b 20%, #ff9800 40%, #ff5722 60%, #ff1744 80%, transparent 100%);
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      animation: flameDance 0.3s infinite ease-in-out alternate;
      box-shadow: 0 0 20px #ff9800, 0 0 40px #ff5722, 0 0 60px #ff1744;
    }

    @keyframes candlePulse {
      0%, 100% { 
        transform: scaleY(1);
        box-shadow: 0 0 20px rgba(255, 68, 68, 0.8), 0 0 40px rgba(255, 68, 68, 0.4);
      }
      50% { 
        transform: scaleY(1.02);
        box-shadow: 0 0 30px rgba(255, 68, 68, 1), 0 0 60px rgba(255, 68, 68, 0.6);
      }
    }

    @keyframes flameDance {
      0% { 
        transform: translateX(-50%) rotate(-8deg) scaleY(0.9) scaleX(0.95);
        opacity: 0.9;
      }
      100% { 
        transform: translateX(-50%) rotate(8deg) scaleY(1.1) scaleX(1.05);
        opacity: 1;
      }
    }

    /* Resposta correta - velas verdes */
    .vela.correct-glow {
      background: linear-gradient(to bottom, #004d00 0%, #00aa44 30%, #00ff88 50%, #00aa44 70%, #004d00 100%);
      box-shadow: 0 0 30px rgba(0, 255, 136, 1), 0 0 60px rgba(0, 255, 136, 0.6);
      animation: correctCandle 0.5s ease;
    }

    .vela.correct-glow::after {
      background: radial-gradient(ellipse at bottom, #fff 0%, #aaffaa 20%, #00ff88 40%, #00cc66 60%, #009944 80%, transparent 100%);
      box-shadow: 0 0 30px #00ff88, 0 0 60px #00cc66, 0 0 90px #009944;
    }

    /* Resposta errada - velas mais vermelhas */
    .vela.wrong-glow {
      background: linear-gradient(to bottom, #4d0000 0%, #aa0022 30%, #ff0044 50%, #aa0022 70%, #4d0000 100%);
      box-shadow: 0 0 30px rgba(255, 0, 68, 1), 0 0 60px rgba(255, 0, 68, 0.6);
      animation: wrongCandle 0.5s ease;
    }

    .vela.wrong-glow::after {
      background: radial-gradient(ellipse at bottom, #fff 0%, #ffaaaa 20%, #ff4444 40%, #ff0044 60%, #aa0022 80%, transparent 100%);
      box-shadow: 0 0 30px #ff0044, 0 0 60px #cc0033, 0 0 90px #990022;
    }

    @keyframes correctCandle {
      0%, 100% { transform: scaleY(1); }
      50% { transform: scaleY(1.2); }
    }

    @keyframes wrongCandle {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    /* Contador de f√© */
    .faith-counter {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 20px 0;
      font-size: 1rem;
    }

    .faith-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 20px;
      border: 2px solid var(--gold);
      transition: all 0.3s ease;
    }

    .faith-item.correct-faith {
      border-color: var(--correct-color);
      box-shadow: 0 0 20px var(--correct-color);
      animation: faithPulse 0.5s ease;
    }

    .faith-item.wrong-faith {
      border-color: var(--wrong-color);
      box-shadow: 0 0 20px var(--wrong-color);
    }

    @keyframes faithPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .faith-icon {
      font-size: 1.5rem;
    }

    .faith-value {
      font-weight: bold;
      color: var(--gold);
      font-size: 1.2rem;
    }

    /* √Årea do quiz */
    .quiz-area {
      background: linear-gradient(135deg, rgba(20, 0, 0, 0.9) 0%, rgba(40, 0, 10, 0.9) 50%, rgba(20, 0, 0, 0.9) 100%);
      border: 3px solid;
      border-image: linear-gradient(45deg, #ff6b35, #ffd700, #ff1744, #ffd700, #ff6b35) 1;
      border-radius: 20px;
      padding: 30px;
      margin: 20px 0;
      backdrop-filter: blur(15px);
      box-shadow: 0 0 50px rgba(255, 107, 53, 0.4), inset 0 0 30px rgba(255, 215, 0, 0.1);
      position: relative;
      overflow: hidden;
    }

    .quiz-area::before {
      content: '‚ú®';
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 1.5rem;
      animation: sparkle 2s infinite;
    }

    .quiz-area::after {
      content: '‚ú®';
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 1.5rem;
      animation: sparkle 2s infinite 0.5s;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0.5; transform: scale(1) rotate(0deg); }
      50% { opacity: 1; transform: scale(1.2) rotate(180deg); }
    }

    .question {
      font-size: 1.4rem;
      margin-bottom: 25px;
      color: var(--gold);
      text-shadow: 0 0 10px var(--gold), 2px 2px 4px #000;
      line-height: 1.5;
      animation: questionAppear 0.5s ease;
    }

    @keyframes questionAppear {
      0% { opacity: 0; transform: translateY(-20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 20px;
    }

    .option {
      padding: 18px 30px;
      background: linear-gradient(45deg, #8b0000, #cc1133, #ff1744, #cc1133, #8b0000);
      background-size: 300% 300%;
      border: 3px solid var(--secondary-glow);
      border-radius: 30px;
      color: white;
      font-size: 1.1rem;
      font-family: 'Cinzel', serif;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      animation: optionShine 4s infinite linear;
      box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
    }

    .option::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.6s;
    }

    .option:hover::before {
      left: 100%;
    }

    .option:hover {
      transform: translateY(-5px) scale(1.03);
      box-shadow: 0 10px 40px rgba(255, 107, 53, 0.6), 0 0 20px rgba(255, 215, 0, 0.4);
      border-color: var(--gold);
      background-position: 100% 0;
    }

    .option.correct {
      background: linear-gradient(45deg, #004d00, #00aa44, #00ff88, #00aa44, #004d00);
      border-color: var(--correct-color);
      box-shadow: 0 0 40px var(--correct-color);
      animation: correctOption 0.8s ease;
    }

    .option.wrong {
      background: linear-gradient(45deg, #4d0000, #aa0022, #ff0044, #aa0022, #4d0000);
      border-color: var(--wrong-color);
      box-shadow: 0 0 40px var(--wrong-color);
      animation: wrongOption 0.5s ease;
    }

    @keyframes correctOption {
      0% { transform: scale(1); }
      25% { transform: scale(1.1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @keyframes wrongOption {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-15px) rotate(-2deg); }
      40%, 80% { transform: translateX(15px) rotate(2deg); }
    }

    @keyframes optionShine {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Feedback de resposta */
    .feedback {
      font-size: 1.5rem;
      margin: 20px 0;
      padding: 15px;
      border-radius: 15px;
      display: none;
      animation: feedbackPop 0.5s ease;
    }

    .feedback.show {
      display: block;
    }

    .feedback.correct-feedback {
      background: rgba(0, 255, 136, 0.2);
      border: 2px solid var(--correct-color);
      color: var(--correct-color);
    }

    .feedback.wrong-feedback {
      background: rgba(255, 0, 68, 0.2);
      border: 2px solid var(--wrong-color);
      color: var(--wrong-color);
    }

    @keyframes feedbackPop {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }

    /* Progresso */
    .progress-container {
      margin: 20px 0;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 15px;
      padding: 8px;
      border: 2px solid var(--secondary-glow);
    }

    .progress-bar {
      height: 15px;
      background: linear-gradient(90deg, #ff1744, #ff6b35, #ffd700, #ff6b35, #ff1744);
      background-size: 200% 100%;
      border-radius: 10px;
      transition: width 0.5s ease;
      box-shadow: 0 0 20px rgba(255, 107, 53, 1);
      animation: progressGlow 2s infinite linear;
    }

    @keyframes progressGlow {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }

    .progress-text {
      margin-top: 12px;
      font-size: 1.1rem;
      color: var(--gold);
      text-shadow: 0 0 10px var(--gold);
    }

    /* Bot√£o final */
    .reveal-btn {
      padding: 25px 50px;
      font-size: 1.4rem;
      background: linear-gradient(45deg, #8b0000, #ff1744, #ffd700, #ff1744, #8b0000);
      background-size: 300% 300%;
      color: white;
      border: 4px solid var(--gold);
      border-radius: 40px;
      cursor: pointer;
      font-family: 'Cinzel', serif;
      font-weight: 700;
      transition: all 0.3s ease;
      margin: 30px 0;
      display: none;
      text-transform: uppercase;
      letter-spacing: 2px;
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.5), 0 0 60px rgba(255, 107, 53, 0.3);
      animation: revealBtnPulse 2s infinite ease-in-out;
    }

    @keyframes revealBtnPulse {
      0%, 100% { 
        transform: scale(1);
        box-shadow: 0 0 30px rgba(255, 215, 0, 0.5), 0 0 60px rgba(255, 107, 53, 0.3);
      }
      50% { 
        transform: scale(1.05);
        box-shadow: 0 0 50px rgba(255, 215, 0, 0.8), 0 0 100px rgba(255, 107, 53, 0.5);
      }
    }

    .reveal-btn:hover {
      transform: scale(1.1) rotate(1deg);
      box-shadow: 0 0 60px rgba(255, 215, 0, 1), 0 0 120px rgba(255, 107, 53, 0.8);
      background-position: 100% 0;
    }

    /* Resultado */
    .result-area {
      margin-top: 30px;
      display: none;
    }

    .gratitude-message {
      font-size: 1.1rem;
      color: var(--gold);
      margin-bottom: 20px;
      font-style: italic;
      text-shadow: 0 0 10px var(--gold);
      animation: gratitudeGlow 3s infinite alternate;
    }

    @keyframes gratitudeGlow {
      0% { opacity: 0.8; }
      100% { opacity: 1; text-shadow: 0 0 20px var(--gold), 0 0 40px var(--secondary-glow); }
    }

    .pombagira-name {
      font-family: 'Dancing Script', cursive;
      font-size: 3rem;
      color: var(--gold);
      text-shadow: 0 0 30px var(--gold), 0 0 60px var(--secondary-glow);
      margin: 20px 0;
      animation: resultGlow 2s ease-in-out infinite alternate;
    }

    @keyframes resultGlow {
      0% { 
        text-shadow: 0 0 30px var(--gold), 0 0 60px var(--secondary-glow);
        transform: scale(1);
      }
      100% { 
        text-shadow: 0 0 50px var(--gold), 0 0 80px var(--secondary-glow), 0 0 100px #ff1744;
        transform: scale(1.03);
      }
    }

    .pombagira-image {
      width: 280px;
      height: 280px;
      border-radius: 50%;
      border: 6px solid var(--gold);
      box-shadow: 0 0 60px rgba(255, 215, 0, 0.8), 0 0 100px rgba(255, 107, 53, 0.5);
      animation: imageReveal 1.5s ease forwards, imageGlow 3s infinite alternate 1.5s;
      margin: 20px 0;
      object-fit: cover;
    }

    @keyframes imageReveal {
      0% { 
        transform: scale(0) rotate(360deg);
        opacity: 0;
      }
      60% {
        transform: scale(1.1) rotate(-10deg);
      }
      100% { 
        transform: scale(1) rotate(0deg);
        opacity: 1;
      }
    }

    @keyframes imageGlow {
      0% { box-shadow: 0 0 60px rgba(255, 215, 0, 0.8), 0 0 100px rgba(255, 107, 53, 0.5); }
      100% { box-shadow: 0 0 80px rgba(255, 215, 0, 1), 0 0 150px rgba(255, 107, 53, 0.8); }
    }

    .pombagira-description {
      font-size: 1.2rem;
      line-height: 1.7;
      color: #fff;
      background: linear-gradient(135deg, rgba(20, 0, 0, 0.8), rgba(40, 0, 10, 0.8));
      padding: 25px;
      border-radius: 15px;
      margin-top: 20px;
      border-left: 6px solid var(--gold);
      box-shadow: 0 0 30px rgba(255, 107, 53, 0.3);
    }

    .restart-btn {
      padding: 18px 40px;
      font-size: 1.2rem;
      background: linear-gradient(45deg, #4a4a4a, #666, #888, #666, #4a4a4a);
      background-size: 300% 300%;
      color: white;
      border: 3px solid #aaa;
      border-radius: 25px;
      cursor: pointer;
      font-family: 'Cinzel', serif;
      margin-top: 30px;
      transition: all 0.3s ease;
      animation: restartShine 4s infinite linear;
    }

    @keyframes restartShine {
      0% { background-position: 0% 50%; }
      100% { background-position: 300% 50%; }
    }

    .restart-btn:hover {
      background: linear-gradient(45deg, #666, #888);
      transform: scale(1.08);
      box-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
    }

    /* Efeito de celebra√ß√£o */
    .celebration {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 100;
      display: none;
    }

    .celebration.active {
      display: block;
      animation: celebrationFlash 1s ease;
    }

    @keyframes celebrationFlash {
      0%, 100% { background: transparent; }
      10%, 30%, 50% { background: rgba(255, 215, 0, 0.2); }
      20%, 40% { background: transparent; }
    }

    /* Mensagens de f√© */
    .faith-message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2rem;
      color: var(--gold);
      text-shadow: 0 0 30px var(--gold);
      z-index: 200;
      opacity: 0;
      pointer-events: none;
    }

    .faith-message.show {
      animation: faithMessageShow 1.5s ease forwards;
    }

    @keyframes faithMessageShow {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
      30% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(1.5); }
    }

    /* Responsividade */
    @media (max-width: 600px) {
      .container { padding: 15px; }
      .quiz-area { padding: 20px; }
      .question { font-size: 1.2rem; }
      .option { padding: 14px 20px; font-size: 1rem; }
      .vela { width: 16px; height: 55px; margin: 0 8px; }
      .pombagira-image { width: 220px; height: 220px; }
      .faith-counter { gap: 15px; flex-wrap: wrap; }
      .faith-item { padding: 8px 15px; }
      
      /* Ajuste do contador para mobile */
      #global-counter {
        bottom: 10px;
        right: 10px;
        padding: 5px 10px;
        font-size: 10px;
        opacity: 0.6;
      }
      #global-count {
        font-size: 10px;
      }
    }

    /* Anima√ß√£o de entrada */
    .fade-in {
      animation: fadeIn 0.6s ease forwards;
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(30px) scale(0.95); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }
  </style>
</head>
<body>
  <canvas id="particles"></canvas>
  <div class="screen-glow" id="screenGlow"></div>
  <div class="celebration" id="celebration"></div>
  <div class="faith-message" id="faithMessage"></div>
  
  <!-- CONTADOR SUPABASE FLUTUANTE -->
  <div id="global-counter" title="Devotos do Or√°culo">
    <span style="opacity: 0.8;">üïØÔ∏è</span>
    <span id="global-count">0</span>
    <span class="counter-dot" id="counter-status"></span>
  </div>
  
  <div class="container">
    <div class="devotion-message">
      ‚ú® "Que a luz das velas ilumine seu caminho espiritual" ‚ú®
    </div>

    <div class="altar">
      <div class="vela"></div>
      <div class="vela"></div>
      <div class="vela"></div>
      <div class="vela"></div>
      <div class="vela"></div>
      <div class="vela"></div>
      <div class="vela"></div>
    </div>

    <h1>üî• Or√°culo Sagrado das Pombagiras üîÆ</h1>

    <div class="faith-counter">
      <div class="faith-item" id="faithCorrect">
        <span class="faith-icon">üôè</span>
        <span>F√©:</span>
        <span class="faith-value" id="faithValue">0</span>
      </div>
      <div class="faith-item" id="gratitudeItem">
        <span class="faith-icon">üí´</span>
        <span>Gratid√£o:</span>
        <span class="faith-value" id="gratitudeValue">0</span>
      </div>
    </div>

    <div class="progress-container">
      <div class="progress-bar" id="progressBar" style="width: 0%"></div>
      <div class="progress-text" id="progressText">üïØÔ∏è Quest√£o 0 de 12 üïØÔ∏è</div>
    </div>

    <div class="quiz-area" id="quizArea">
      <div class="question" id="question">Preparando o or√°culo sagrado...</div>
      <div class="feedback" id="feedback"></div>
      <div class="options" id="options"></div>
    </div>

    <button class="reveal-btn" id="revealBtn" onclick="revealPombagira()">
      üîÆ Revelar Minha Pombagira Guia üîÆ
    </button>

    <div class="result-area" id="resultArea">
      <div class="gratitude-message" id="gratitudeMessage">
        üôè "Gratid√£o pela jornada espiritual. Que sua f√© seja renovada!" üôè
      </div>
      <div class="pombagira-name" id="pombagiraName"></div>
      <img class="pombagira-image" id="pombagiraImage" src="" alt="Pombagira">
      <div class="pombagira-description" id="pombagiraDescription"></div>
      <button class="restart-btn" onclick="restartQuiz()">üîÑ Consultar Novamente com Devo√ß√£o</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // ========== SUPABASE CONTADOR - VERS√ÉO CORRETA ==========
    const SUPABASE_URL = 'https://qgnprifuachmfxoaalax.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFnbnByaWZ1YWNobWZ4b2FhbGF4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzODU5MDcsImV4cCI6MjA4MDk2MTkwN30.sKSYFhcI-zflr9RUKXpWF0_5sc6foDG7yxdEirtE0W4';
    
    // O nome da tabela EXISTENTE √© este:
    const TABLE_NAME = 'site_alexialuzdeferro';
    // Nome do seu site (vamos usar como ID na tabela)
    const SITE_ID = 'oraculo_pombagira';

    async function initCounter() {
        try {
            const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
            
            // Verificar se j√° contamos nesta sess√£o
            if (!sessionStorage.getItem('oraculo_visited')) {
                // Incrementar contador na tabela EXISTENTE
                await incrementCounter(supabase);
                sessionStorage.setItem('oraculo_visited', 'true');
                document.getElementById('counter-status').classList.add('online');
            } else {
                // Apenas mostrar o valor atual
                await showCurrentCount(supabase);
                document.getElementById('counter-status').classList.add('online');
            }
            
        } catch (error) {
            console.log('‚ö†Ô∏è Usando modo offline...');
            useOfflineCounter();
        }
    }
    
    async function incrementCounter(supabase) {
        try {
            // PRIMEIRO: Verificar se j√° existe um registro para este site
            const { data: existing, error: fetchError } = await supabase
                .from(TABLE_NAME)
                .select('*')
                .eq('site_id', SITE_ID)
                .single();
            
            if (fetchError) {
                // N√£o existe registro ainda - CRIAR PRIMEIRO
                console.log('üîÑ Criando primeiro registro para o or√°culo...');
                
                const { data: newData, error: createError } = await supabase
                    .from(TABLE_NAME)
                    .insert([{
                        site_id: SITE_ID,
                        site_name: 'Or√°culo Sagrado das Pombagiras',
                        view_count: 1,
                        last_updated: new Date().toISOString(),
                        created_at: new Date().toISOString()
                    }]);
                
                if (createError) {
                    console.error('‚ùå Erro ao criar:', createError);
                    
                    // Se der erro, pode ser que a tabela n√£o tenha as colunas certas
                    // Vamos tentar uma abordagem mais simples
                    await trySimpleInsert(supabase);
                    return;
                }
                
                // Animar o n√∫mero
                const countEl = document.getElementById('global-count');
                countEl.textContent = '1';
                animateCounter(countEl);
                console.log('‚úÖ Primeiro visitante registrado!');
                
            } else {
                // J√° existe - ATUALIZAR incrementando
                const currentCount = existing.view_count || 0;
                const newCount = currentCount + 1;
                
                const { error: updateError } = await supabase
                    .from(TABLE_NAME)
                    .update({
                        view_count: newCount,
                        last_updated: new Date().toISOString()
                    })
                    .eq('site_id', SITE_ID);
                
                if (updateError) {
                    console.error('‚ùå Erro ao atualizar:', updateError);
                    
                    // Tentar abordagem alternativa
                    await tryAlternativeUpdate(supabase, currentCount, newCount);
                    return;
                }
                
                // Animar o n√∫mero
                const countEl = document.getElementById('global-count');
                countEl.textContent = newCount;
                animateCounter(countEl);
                console.log('‚úÖ Contador atualizado para:', newCount);
            }
            
        } catch (error) {
            console.error('Erro Supabase:', error);
            throw error;
        }
    }
    
    // M√©todo alternativo caso a estrutura da tabela seja diferente
    async function trySimpleInsert(supabase) {
        try {
            // Tentar inserir de forma mais simples
            const { error } = await supabase
                .from(TABLE_NAME)
                .insert([{
                    site_name: 'Or√°culo Sagrado das Pombagiras',
                    view_count: 1
                }]);
            
            if (error) {
                console.log('üì± Usando localStorage...');
                useOfflineCounter();
            } else {
                document.getElementById('global-count').textContent = '1';
                animateCounter(document.getElementById('global-count'));
            }
        } catch (e) {
            useOfflineCounter();
        }
    }
    
    async function tryAlternativeUpdate(supabase, currentCount, newCount) {
        try {
            // Tentar atualizar de forma diferente
            const { error } = await supabase
                .from(TABLE_NAME)
                .update({ view_count: newCount })
                .eq('site_name', 'Or√°culo Sagrado das Pombagiras');
            
            if (!error) {
                document.getElementById('global-count').textContent = newCount;
                animateCounter(document.getElementById('global-count'));
            } else {
                useOfflineCounter();
            }
        } catch (e) {
            useOfflineCounter();
        }
    }
    
    async function showCurrentCount(supabase) {
        try {
            // Tentar buscar pelo site_id primeiro
            let { data, error } = await supabase
                .from(TABLE_NAME)
                .select('view_count')
                .eq('site_id', SITE_ID)
                .single();
            
            if (error) {
                // Tentar buscar pelo site_name
                ({ data, error } = await supabase
                    .from(TABLE_NAME)
                    .select('view_count')
                    .eq('site_name', 'Or√°culo Sagrado das Pombagiras')
                    .single());
            }
            
            if (data && data.view_count !== undefined) {
                document.getElementById('global-count').textContent = data.view_count;
            } else {
                // Se n√£o encontrar, mostrar 0
                document.getElementById('global-count').textContent = '0';
            }
        } catch (error) {
            console.error('Erro ao buscar:', error);
            document.getElementById('global-count').textContent = '?';
        }
    }
    
    function animateCounter(element) {
        element.style.transform = 'scale(1.3)';
        element.style.color = '#ff6b35';
        element.style.textShadow = '0 0 10px #ff6b35';
        
        setTimeout(() => {
            element.style.transform = 'scale(1)';
            element.style.color = '#ffd700';
            element.style.textShadow = '0 0 5px rgba(255, 215, 0, 0.5)';
        }, 300);
    }
    
    function useOfflineCounter() {
        let local = localStorage.getItem('local_oraculo_views') || 0;
        local = parseInt(local) + 1;
        localStorage.setItem('local_oraculo_views', local);
        
        const countEl = document.getElementById('global-count');
        countEl.textContent = local;
        countEl.style.opacity = '0.8';
        
        const statusDot = document.getElementById('counter-status');
        statusDot.style.background = 'rgba(251, 191, 36, 0.7)';
        statusDot.classList.add('online');
        
        console.log('üì± Modo offline: contador local:', local);
    }

    // ========== SISTEMA DE PART√çCULAS ==========
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    let canvasWidth = canvas.width = window.innerWidth;
    let canvasHeight = canvas.height = window.innerHeight;
    const particles = [];

    class Particle {
      constructor(special = false) {
        this.x = Math.random() * canvasWidth;
        this.y = special ? canvasHeight + 10 : Math.random() * canvasHeight;
        this.radius = special ? Math.random() * 5 + 3 : Math.random() * 3 + 1;
        this.speedY = special ? Math.random() * 5 + 3 : Math.random() * 2 + 0.5;
        this.speedX = (Math.random() - 0.5) * (special ? 3 : 0.5);
        this.alpha = Math.random() * 0.7 + 0.3;
        this.special = special;
        this.life = special ? 100 : Infinity;
        
        const colors = ['255,107,53', '255,23,68', '255,215,0', '255,68,68'];
        this.colorBase = colors[Math.floor(Math.random() * colors.length)];
      }

      update() {
        this.y -= this.speedY;
        this.x += this.speedX;
        
        if (this.special) {
          this.life--;
          this.alpha = this.life / 100;
        }
        
        if (this.y < -10 && !this.special) {
          this.y = canvasHeight + 10;
          this.x = Math.random() * canvasWidth;
        }
      }

      draw() {
        ctx.globalAlpha = this.alpha;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        
        const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, this.radius);
        gradient.addColorStop(0, `rgba(255, 255, 255, ${this.alpha})`);
        gradient.addColorStop(0.5, `rgba(${this.colorBase}, ${this.alpha})`);
        gradient.addColorStop(1, `rgba(${this.colorBase}, 0)`);
        
        ctx.fillStyle = gradient;
        ctx.fill();
      }
    }

    // Criar part√≠culas iniciais
    for (let i = 0; i < 120; i++) {
      particles.push(new Particle());
    }

    function animateParticles() {
      ctx.clearRect(0, 0, canvasWidth, canvasHeight);
      
      for (let i = particles.length - 1; i >= 0; i--) {
        const particle = particles[i];
        particle.update();
        particle.draw();
        
        if (particle.special && particle.life <= 0) {
          particles.splice(i, 1);
        }
      }
      
      requestAnimationFrame(animateParticles);
    }

    function createCelebrationParticles(isCorrect) {
      const count = isCorrect ? 40 : 20;
      for (let i = 0; i < count; i++) {
        setTimeout(() => {
          const particle = new Particle(true);
          if (isCorrect) {
            particle.colorBase = '0,255,136';
          } else {
            particle.colorBase = '255,0,68';
          }
          particles.push(particle);
        }, i * 30);
      }
    }

    function createFinalCelebration() {
      for (let i = 0; i < 100; i++) {
        setTimeout(() => {
          const particle = new Particle(true);
          particle.colorBase = ['255,215,0', '255,107,53', '255,23,68'][Math.floor(Math.random() * 3)];
          particle.radius = Math.random() * 8 + 4;
          particle.speedY = Math.random() * 6 + 4;
          particles.push(particle);
        }, i * 50);
      }
    }

    // ========== DADOS DO QUIZ ==========
    const questions = [
      {
        q: "üî• Qual √© o significado da sauda√ß√£o 'Laroy√™ Exu'?",
        options: [
          "Salve! Abram-se os caminhos!",
          "Boa sorte em todos os sentidos",
          "Prote√ß√£o contra o mal"
        ],
        answer: 0
      },
      {
        q: "üåπ As Pombagiras s√£o entidades espirituais ligadas principalmente a:",
        options: [
          "Mist√©rios do amor, sedu√ß√£o e justi√ßa feminina",
          "Somente rituais de guerra",
          "Apenas cura e medicina"
        ],
        answer: 0
      },
      {
        q: "‚ù§Ô∏è Qual cor √© mais tradicionalmente associada √†s Pombagiras?",
        options: [
          "Azul marinho",
          "Vermelho intenso",
          "Verde esmeralda"
        ],
        answer: 1
      },
      {
        q: "‚ú® Em qual local as Pombagiras manifestam maior for√ßa?",
        options: [
          "Encruzilhadas e cruzamentos",
          "Topos de montanhas",
          "Margens de rios"
        ],
        answer: 0
      },
      {
        q: "üåπ Qual elemento √© s√≠mbolo de poder das Pombagiras?",
        options: [
          "Espadas douradas",
          "Tridentes de ferro",
          "Rosas vermelhas"
        ],
        answer: 2
      },
      {
        q: "üôè O que √© fundamental no relacionamento com as Pombagiras?",
        options: [
          "Respeito, oferendas apropriadas e sinceridade",
          "Apenas velas coloridas",
          "Somente m√∫sicas espec√≠ficas"
        ],
        answer: 0
      },
      {
        q: "üëë Maria Padilha √© conhecida como:",
        options: [
          "A Rainha das Encruzilhadas",
          "A Guardi√£ dos Mares",
          "A Protetora das Florestas"
        ],
        answer: 0
      },
      {
        q: "üíï As Pombagiras podem auxiliar principalmente em quest√µes de:",
        options: [
          "Amor, relacionamentos e autoestima feminina",
          "Somente neg√≥cios financeiros",
          "Apenas sa√∫de f√≠sica"
        ],
        answer: 0
      },
      {
        q: "üçæ Qual bebida √© tradicionalmente oferecida √†s Pombagiras?",
        options: [
          "√Ågua benta",
          "Champagne ou licor",
          "Ch√° de ervas"
        ],
        answer: 1
      },
      {
        q: "‚öñÔ∏è A Calunga representa:",
        options: [
          "O reino dos mist√©rios e da justi√ßa espiritual",
          "Apenas alegria e festa",
          "Somente coragem f√≠sica"
        ],
        answer: 0
      },
      {
        q: "üåô Qual dia da semana √© mais prop√≠cio para rituais com Pombagiras?",
        options: [
          "Domingo",
          "Quarta-feira",
          "Segunda-feira"
        ],
        answer: 2
      },
      {
        q: "üå∫ O perfume tradicionalmente associado √†s Pombagiras √©:",
        options: [
          "Lavanda suave",
          "Rosas vermelhas intensas",
          "Jasmim delicado"
        ],
        answer: 1
      }
    ];

    const pombagiras = [
      {
        name: "üëë Pombagira Maria Padilha üëë",
        description: "A Rainha das Encruzilhadas, senhora do amor e da sedu√ß√£o. Ela governa os mist√©rios femininos e ajuda em quest√µes do cora√ß√£o, trazendo paix√£o e removendo obst√°culos amorosos. Sua for√ßa reside na sabedoria feminina ancestral.",
        traits: "Elegante, poderosa, sedutora e justa. Protege as mulheres e ensina sobre o poder feminino.",
        image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='250' height='250' viewBox='0 0 250 250'%3E%3Cdefs%3E%3CradialGradient id='bg' cx='50%25' cy='50%25' r='50%25'%3E%3Cstop offset='0%25' stop-color='%23ff1744'/%3E%3Cstop offset='50%25' stop-color='%238b0000'/%3E%3Cstop offset='100%25' stop-color='%23000'/%3E%3C/radialGradient%3E%3C/defs%3E%3Ccircle cx='125' cy='125' r='125' fill='url(%23bg)'/%3E%3Ctext x='125' y='100' text-anchor='middle' fill='%23ffd700' font-size='40'%3Eüëë%3C/text%3E%3Ctext x='125' y='140' text-anchor='middle' fill='%23ffd700' font-size='16' font-family='serif'%3EMaria Padilha%3C/text%3E%3Ctext x='125' y='170' text-anchor='middle' fill='%23ff6b35' font-size='30'%3Eüåπ%3C/text%3E%3C/svg%3E"
      },
      {
        name: "üîÆ Pombagira Cigana üîÆ",
        description: "A cigana dos caminhos, senhora da liberdade e da intui√ß√£o. Ela traz sorte nos neg√≥cios, revela segredos atrav√©s da cartomancia e protege os viajantes. Sua energia √© livre como o vento.",
        traits: "Livre, intuitiva, misteriosa e protetora. Especialista em revela√ß√µes e caminhos.",
        image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='250' height='250' viewBox='0 0 250 250'%3E%3Cdefs%3E%3CradialGradient id='bg2' cx='50%25' cy='50%25' r='50%25'%3E%3Cstop offset='0%25' stop-color='%23ff6b35'/%3E%3Cstop offset='50%25' stop-color='%23cc3300'/%3E%3Cstop offset='100%25' stop-color='%23000'/%3E%3C/radialGradient%3E%3C/defs%3E%3Ccircle cx='125' cy='125' r='125' fill='url(%23bg2)'/%3E%3Ctext x='125' y='100' text-anchor='middle' fill='%23ffd700' font-size='40'%3EüîÆ%3C/text%3E%3Ctext x='125' y='140' text-anchor='middle' fill='%23ffd700' font-size='16' font-family='serif'%3EPombagira Cigana%3C/text%3E%3Ctext x='125' y='170' text-anchor='middle' fill='%23ff6b35' font-size='30'%3E‚ú®%3C/text%3E%3C/svg%3E"
      },
      {
        name: "‚ú® Pombagira das Almas ‚ú®",
        description: "A guardi√£ das almas perdidas, senhora da justi√ßa espiritual. Ela trabalha com energias profundas de transforma√ß√£o, ajudando na evolu√ß√£o espiritual e na resolu√ß√£o de quest√µes c√°rmicas antigas.",
        traits: "Profunda, transformadora, justa e espiritual. Trabalha com energias de renova√ß√£o.",
        image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='250' height='250' viewBox='0 0 250 250'%3E%3Cdefs%3E%3CradialGradient id='bg3' cx='50%25' cy='50%25' r='50%25'%3E%3Cstop offset='0%25' stop-color='%239933ff'/%3E%3Cstop offset='50%25' stop-color='%234d0099'/%3E%3Cstop offset='100%25' stop-color='%23000'/%3E%3C/radialGradient%3E%3C/defs%3E%3Ccircle cx='125' cy='125' r='125' fill='url(%23bg3)'/%3E%3Ctext x='125' y='100' text-anchor='middle' fill='%23ffd700' font-size='40'%3E‚ú®%3C/text%3E%3Ctext x='125' y='140' text-anchor='middle' fill='%23ffd700' font-size='14' font-family='serif'%3EPombagira das Almas%3C/text%3E%3Ctext x='125' y='170' text-anchor='middle' fill='%239933ff' font-size='30'%3EüïØÔ∏è%3C/text%3E%3C/svg%3E"
      }
    ];

    const faithMessages = [
      "üôè Que sua f√© seja fortalecida!",
      "‚ú® A luz te guia!",
      "üåπ Gratid√£o pela devo√ß√£o!",
      "üí´ Seu caminho est√° aberto!",
      "üî• Ax√©! For√ßa espiritual!",
      "üëë A Rainha sorri para voc√™!"
    ];

    const wrongMessages = [
      "üïØÔ∏è Acenda mais uma vela de f√©...",
      "üôè Continue em sua jornada...",
      "‚ú® A sabedoria vem com a pr√°tica...",
      "üåπ N√£o desanime, siga em frente!"
    ];

    let currentQuestion = 0;
    let score = 0;
    let gratitudeScore = 0;
    let userAnswers = [];

    // ========== FUN√á√ïES DO QUIZ ==========
    function showFaithMessage(isCorrect) {
      const faithMessage = document.getElementById('faithMessage');
      const messages = isCorrect ? faithMessages : wrongMessages;
      faithMessage.textContent = messages[Math.floor(Math.random() * messages.length)];
      faithMessage.className = 'faith-message show';
      
      setTimeout(() => {
        faithMessage.className = 'faith-message';
      }, 1500);
    }

    function updateCandleEffects(isCorrect) {
      const candles = document.querySelectorAll('.vela');
      const effectClass = isCorrect ? 'correct-glow' : 'wrong-glow';
      
      candles.forEach((candle, index) => {
        setTimeout(() => {
          candle.classList.add(effectClass);
        }, index * 50);
      });
      
      setTimeout(() => {
        candles.forEach(candle => {
          candle.classList.remove('correct-glow', 'wrong-glow');
        });
      }, 1500);
    }

    function updateScreenGlow(isCorrect) {
      const screenGlow = document.getElementById('screenGlow');
      const body = document.body;
      
      screenGlow.className = 'screen-glow ' + (isCorrect ? 'correct' : 'wrong');
      body.className = isCorrect ? 'correct-answer' : 'wrong-answer';
      
      setTimeout(() => {
        screenGlow.className = 'screen-glow';
        body.className = '';
      }, 1000);
    }

    function showFeedback(isCorrect) {
      const feedback = document.getElementById('feedback');
      feedback.className = 'feedback show ' + (isCorrect ? 'correct-feedback' : 'wrong-feedback');
      feedback.innerHTML = isCorrect 
        ? '‚ú® Resposta Correta! Sua f√© aumenta! ‚ú®' 
        : 'üïØÔ∏è Resposta incorreta... Continue em devo√ß√£o! üïØÔ∏è';
      
      setTimeout(() => {
        feedback.className = 'feedback';
      }, 1200);
    }

    function loadQuestion() {
      if (currentQuestion >= questions.length) {
        showFinalButton();
        return;
      }

      const question = questions[currentQuestion];
      const progress = ((currentQuestion) / questions.length) * 100;
      
      document.getElementById('progressBar').style.width = progress + '%';
      document.getElementById('progressText').textContent = `üïØÔ∏è Quest√£o ${currentQuestion + 1} de ${questions.length} üïØÔ∏è`;
      
      document.getElementById('question').textContent = question.q;
      document.getElementById('feedback').className = 'feedback';
      
      const optionsContainer = document.getElementById('options');
      optionsContainer.innerHTML = '';
      
      question.options.forEach((option, index) => {
        const button = document.createElement('button');
        button.className = 'option fade-in';
        button.textContent = option;
        button.style.animationDelay = `${index * 0.15}s`;
        button.onclick = () => selectAnswer(index, button);
        optionsContainer.appendChild(button);
      });
    }

    function selectAnswer(selectedIndex, button) {
      userAnswers.push(selectedIndex);
      const isCorrect = selectedIndex === questions[currentQuestion].answer;
      
      // Desabilitar todas as op√ß√µes
      const options = document.querySelectorAll('.option');
      options.forEach(opt => opt.style.pointerEvents = 'none');
      
      if (isCorrect) {
        score++;
        document.getElementById('faithValue').textContent = score;
        document.getElementById('faithCorrect').classList.add('correct-faith');
        setTimeout(() => document.getElementById('faithCorrect').classList.remove('correct-faith'), 500);
        
        button.classList.add('correct');
        createCelebrationParticles(true);
        updateCandleEffects(true);
        updateScreenGlow(true);
        showFeedback(true);
        showFaithMessage(true);
      } else {
        gratitudeScore++;
        document.getElementById('gratitudeValue').textContent = gratitudeScore;
        document.getElementById('gratitudeItem').classList.add('wrong-faith');
        setTimeout(() => document.getElementById('gratitudeItem').classList.remove('wrong-faith'), 500);
        
        button.classList.add('wrong');
        
        // Mostrar resposta correta
        options[questions[currentQuestion].answer].classList.add('correct');
        
        createCelebrationParticles(false);
        updateCandleEffects(false);
        updateScreenGlow(false);
        showFeedback(false);
        showFaithMessage(false);
      }
      
      // Vibra√ß√£o
      if (navigator.vibrate) {
        navigator.vibrate(isCorrect ? [100, 50, 100] : [200, 100, 200]);
      }
      
      setTimeout(() => {
        currentQuestion++;
        loadQuestion();
      }, 1500);
    }

    function showFinalButton() {
      document.getElementById('progressBar').style.width = '100%';
      document.getElementById('progressText').textContent = 'üî• Consulta Sagrada Conclu√≠da! üî•';
      
      document.getElementById('question').innerHTML = `
        <div style="font-size: 2rem; color: #ffd700; margin-bottom: 20px; text-shadow: 0 0 20px #ffd700;">
          ‚ú® Jornada Espiritual Completa ‚ú®
        </div>
        <div style="font-size: 1.3rem; line-height: 1.6;">
          <span style="color: #00ff88;">üôè F√© conquistada: ${score}</span><br>
          <span style="color: #ffd700;">üí´ Gratid√£o acumulada: ${gratitudeScore}</span><br><br>
          O or√°culo est√° pronto para revelar<br>sua Pombagira guia com devo√ß√£o!
        </div>
      `;
      document.getElementById('options').innerHTML = '';
      document.getElementById('feedback').className = 'feedback';
      document.getElementById('revealBtn').style.display = 'inline-block';
      
      createFinalCelebration();
    }

    function revealPombagira() {
      let index;
      if (score <= 4) {
        index = 2;
      } else if (score <= 8) {
        index = 1;
      } else {
        index = 0;
      }

      const selectedPombagira = pombagiras[index];
      
      document.getElementById('quizArea').style.display = 'none';
      document.getElementById('revealBtn').style.display = 'none';
      
      // Atualizar mensagem de gratid√£o baseada no desempenho
      const gratitudeMessages = [
        `üôè "Com ${score} acertos, sua f√© √© forte! Gratid√£o pela jornada!" üôè`,
        `‚ú® "Sua devo√ß√£o foi reconhecida! ${score} ben√ß√£os recebidas!" ‚ú®`,
        `üåπ "Que sua gratid√£o pela sabedoria te guie sempre!" üåπ`
      ];
      document.getElementById('gratitudeMessage').textContent = gratitudeMessages[Math.floor(Math.random() * gratitudeMessages.length)];
      
      const resultArea = document.getElementById('resultArea');
      document.getElementById('pombagiraName').textContent = selectedPombagira.name;
      document.getElementById('pombagiraImage').src = selectedPombagira.image;
      document.getElementById('pombagiraDescription').innerHTML = `
        <h3 style="color: #ffd700; margin-bottom: 15px; text-shadow: 0 0 10px #ffd700;">üåπ Sua Pombagira Guia üåπ</h3>
        <p style="margin-bottom: 15px;"><strong style="color: #ff6b35;">Descri√ß√£o:</strong> ${selectedPombagira.description}</p>
        <p style="margin-bottom: 15px;"><strong style="color: #ff6b35;">Caracter√≠sticas:</strong> ${selectedPombagira.traits}</p>
        <p style="color: #ffd700; font-style: italic; margin-top: 20px; text-align: center;">
          üôè "Que sua f√© e devo√ß√£o sejam recompensadas. Laroy√™!" üôè
        </p>
      `;
      
      resultArea.style.display = 'block';
      
      // Celebra√ß√£o final
      document.getElementById('celebration').classList.add('active');
      setTimeout(() => {
        document.getElementById('celebration').classList.remove('active');
      }, 1000);
      
      createFinalCelebration();
      
      if (navigator.vibrate) {
        navigator.vibrate([200, 100, 200, 100, 400]);
      }
    }

    function restartQuiz() {
      currentQuestion = 0;
      score = 0;
      gratitudeScore = 0;
      userAnswers = [];
      
      document.getElementById('faithValue').textContent = '0';
      document.getElementById('gratitudeValue').textContent = '0';
      document.getElementById('quizArea').style.display = 'block';
      document.getElementById('resultArea').style.display = 'none';
      document.getElementById('revealBtn').style.display = 'none';
      
      loadQuestion();
    }

    // ========== INICIALIZA√á√ÉO ==========
    window.addEventListener('resize', () => {
      canvasWidth = canvas.width = window.innerWidth;
      canvasHeight = canvas.height = window.innerHeight;
    });

    // Iniciar tudo quando a p√°gina carregar
    document.addEventListener('DOMContentLoaded', function() {
      // Iniciar contador do Supabase
      initCounter();
      
      // Iniciar part√≠culas
      animateParticles();
      
      // Iniciar quiz com delay
      setTimeout(() => {
        loadQuestion();
      }, 1000);
    });

    // ========== FUN√á√ÉO DE DEBUG (opcional - remova se n√£o quiser) ==========
    window.debugCounter = async function() {
      console.log('üîç DEBUG DO CONTADOR');
      console.log('SessionStorage:', sessionStorage.getItem('oraculo_visited'));
      console.log('LocalStorage:', localStorage.getItem('local_oraculo_views'));
      
      const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
      const { data, error } = await supabase
        .from(TABLE_NAME)
        .select('*');
      
      console.log('Supabase data:', data);
      console.log('Supabase error:', error);
      
      if (confirm('Resetar sess√£o? (Isso far√° contar novamente)')) {
        sessionStorage.removeItem('oraculo_visited');
        location.reload();
      }
    };
  </script>
</body>
</html>
